<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Music App</title>
    
    <!-- Primary Meta Tags -->
    <title>Music App</title>
    <meta name="title" content="Online Music Player">
    <meta name="description" content="You can play different type of songs in this player, Enjoy the music ...">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://bdeb121.github.io/music/">
    <meta property="og:title" content="Online Music Player">
    <meta property="og:description" content="You can play different type of songs in this player, Enjoy the music ...">
    <meta property="og:image" content="image/music123.jpg">
    <meta property="og:image:width" content="1920"/>
    <meta property="og:image:height" content="1200"/>

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://bdeb121.github.io/music/">
    <meta property="twitter:title" content="Online Music Player">
    <meta property="twitter:description" content="You can play different type of songs in this player, Enjoy the music ...">
    <meta property="twitter:image" content="image/music123.jpg">
    
    <link rel="shortcut icon" href="image/musical-note.png" type="image/x-icon">
    
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }
        body{
            background: #f1f3ff;
            font-family: 'Varela Round', sans-serif;
        }
        .container{
            max-width: 480px;
            margin: 0px auto;
            position: relative;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        .container .header{
            display: flex;
            justify-content: space-between;
            padding: 20px 20px;
        }
        .container .header svg{
            width: 24px;
            height: 24px;
            fill: #34353c;
        }


        .container .middle{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-top: 8vh;
        }
        .container .middle .img{
            background: #b7bbc7;
            width: 240px;
            height: 240px;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container .middle .img img{
            width: 100%;
            border-radius: 8px;
        }
        .container .middle .txt{
            margin-top: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            text-transform: capitalize;
        }
        .container .middle .txt h2{
            color: #252525;
        }
        .container .middle .txt h3{
            color: #656565;
        }

        .container .footer{
            margin-top: auto;
            margin-bottom: 30px;
            display: flex;
            flex-direction: column;
        }
        .footer .time-bar{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-self: center;
            width: 80%;
        }
        .time-bar .prog_bar{
            height: 6px;
            background: #858585;
            border-radius: 6px;
            position: relative;
        }
        .time-bar .prog_bar span{
            position: relative;
            height: 6px;
            width: 0%;
            border-radius: 6px;
            background: #151515;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .time-bar .prog_bar span::before{
            content: '';
            position: absolute;
            right: -6px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #000;
        }
        .time-bar .timer{
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
        }
        .container .footer .controls{
            margin: 20px auto 0;
            width: 80%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .container .footer svg{
            width: 32px;
            height: 32px;
            fill: #34353c;
        }
        .container .footer .suff_rept svg,
        .container .footer .list svg{
            width: 24px;
            height: 24px;
            fill: #34353c;
        }
        
        .container .footer .play_pause svg{
            width: 48px;
            height: 48px;
        }

        .container .footer .extra{
            display: none;
        }

        .container .list-bar{
            position: absolute;
            left: 0;
            bottom: 0;
            width: 100%;
            height: 0;
            border-radius: 12px 12px 0 0;
            background: #ffffff;
            transition: all .4s ease-in-out;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            box-shadow: 0px -3.6px 3.6px rgba(0, 0, 0, .3);
        }
        .container .list-bar.active{
            height: 72%;
            padding: 20px;
        }
        .container .list-bar::-webkit-scrollbar{
            display: none;
        }
        .container .list-bar .list-header{
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .list-bar .list-header svg{
            width: 20px;
            height: 20px;
            fill: #34353c;
        }
        .list-bar .list-header .leftM{
            display: flex;
            justify-content: start;
            align-items: center;
        }
        .list-bar .list-header .leftM span{
            font-size: 20px;
            font-weight: 600;
            margin-left: 8px;
            color: #34353c;
        }
        .list-bar .list-header .rightM{
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .list-bar .list-body{
           display: flex;
           flex-direction: column; 
           margin-top: 10px;
           height: calc(100% - 20px);
           overflow-y: auto;
           overflow-x: hidden;
        }
        .container .list-body::-webkit-scrollbar{
            display: none;
        }
        .list-bar .list-body .song{
            padding: 10px 0;
            border-bottom: 1px solid #4d4f5e;
            display: flex;
            justify-content: space-between;
        }
        .list-bar .list-body .song:last-child{
            border-bottom: 0;
            padding-bottom: 0px;
        }
        .list-bar .list-body .song .leftS h3{
            font-size: 16px;
            font-weight: 500;
            color: #34353c;
        }
        .list-bar .list-body .song .leftS h4{
            font-size: 14px;
            font-weight: 500;
            color: #656565;
        }
        .list-bar .list-body .song .rightS{
            font-size: 14px;
            display: flex;
            align-items: flex-end;
        }
        .list-bar .list-body .song.playing,
        .list-bar .list-body .song.playing .leftS h3,
        .list-bar .list-body .song.playing .leftS h4{
            color: coral;
            /* font-weight: 600; */
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="down"> 
                <svg viewBox="0 0 448 512">
                    <path d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"/>
                </svg>
            </div>

            <div class="dots">
                <svg viewBox="0 0 192 512">
                    <path d="M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z"/>
                </svg>
            </div>
        </div>

        <div class="middle">
            <div class="img">
                <img src="" alt="">
            </div>

            <div class="txt">
                <h2>Abcha Din Abcha Rat</h2>
                <h3>Rupak Tiary | Jakir  Aditya</h3>
            </div>
        </div>

        <div class="footer">
            <div class="time-bar">
                <div class="prog_bar">
                    <span></span>
                </div>
                <div class="timer">
                    <div class="currentT">00:00</div>
                    <div class="duration">04:34</div>
                </div>
            </div>

            <div class="controls">
                <div class="suff_rept">
                    <svg><use href="#shuffle" class="shuffle"></use></svg>

                    <svg class="extra">
                        <symbol id="repeat" viewBox="0 0 512 512">
                            <path d="M512 256c0 88.224-71.775 160-160 160H170.067l34.512 32.419c9.875 9.276 10.119 24.883.539 34.464l-10.775 10.775c-9.373 9.372-24.568 9.372-33.941 0l-92.686-92.686c-9.373-9.373-9.373-24.568 0-33.941l92.686-92.686c9.373-9.373 24.568-9.373 33.941 0l10.775 10.775c9.581 9.581 9.337 25.187-.539 34.464L170.067 352H352c52.935 0 96-43.065 96-96 0-13.958-2.996-27.228-8.376-39.204-4.061-9.039-2.284-19.626 4.723-26.633l12.183-12.183c11.499-11.499 30.965-8.526 38.312 5.982C505.814 205.624 512 230.103 512 256zM72.376 295.204C66.996 283.228 64 269.958 64 256c0-52.935 43.065-96 96-96h181.933l-34.512 32.419c-9.875 9.276-10.119 24.883-.539 34.464l10.775 10.775c9.373 9.372 24.568 9.372 33.941 0l92.686-92.686c9.373-9.373 9.373-24.568 0-33.941l-92.686-92.686c-9.373-9.373-24.568-9.373-33.941 0L306.882 29.12c-9.581 9.581-9.337 25.187.539 34.464L341.933 96H160C71.775 96 0 167.776 0 256c0 25.897 6.186 50.376 17.157 72.039 7.347 14.508 26.813 17.481 38.312 5.982l12.183-12.183c7.008-7.008 8.786-17.595 4.724-26.634z"/>
                        </symbol>
                    </svg>

                    <svg class="extra">
                        <symbol id="reptOne" viewBox="0 0 512 512">
                            <path d="M512 256c0 88.224-71.775 160-160 160H170.067l34.512 32.419c9.875 9.276 10.119 24.883.539 34.464l-10.775 10.775c-9.373 9.372-24.568 9.372-33.941 0l-92.686-92.686c-9.373-9.373-9.373-24.568 0-33.941l80.269-80.27c9.373-9.373 24.568-9.373 33.941 0l10.775 10.775c9.581 9.581 9.337 25.187-.539 34.464l-22.095 20H352c52.935 0 96-43.065 96-96 0-13.958-2.996-27.228-8.376-39.204-4.061-9.039-2.284-19.626 4.723-26.633l12.183-12.183c11.499-11.499 30.965-8.526 38.312 5.982C505.814 205.624 512 230.103 512 256zM72.376 295.204C66.996 283.228 64 269.958 64 256c0-52.935 43.065-96 96-96h181.933l-22.095 20.002c-9.875 9.276-10.119 24.883-.539 34.464l10.775 10.775c9.373 9.372 24.568 9.372 33.941 0l80.269-80.27c9.373-9.373 9.373-24.568 0-33.941l-92.686-92.686c-9.373-9.373-24.568-9.373-33.941 0l-10.775 10.775c-9.581 9.581-9.337 25.187.539 34.464L341.933 96H160C71.775 96 0 167.776 0 256c0 25.897 6.186 50.376 17.157 72.039 7.347 14.508 26.813 17.481 38.312 5.982l12.183-12.183c7.008-7.008 8.786-17.595 4.724-26.634zm154.887 4.323c0-7.477 3.917-11.572 11.573-11.572h15.131v-39.878c0-5.163.534-10.503.534-10.503h-.356s-1.779 2.67-2.848 3.738c-4.451 4.273-10.504 4.451-15.666-1.068l-5.518-6.231c-5.342-5.341-4.984-11.216.534-16.379l21.72-19.939c4.449-4.095 8.366-5.697 14.42-5.697h12.105c7.656 0 11.749 3.916 11.749 11.572v84.384h15.488c7.655 0 11.572 4.094 11.572 11.572v8.901c0 7.477-3.917 11.572-11.572 11.572h-67.293c-7.656 0-11.573-4.095-11.573-11.572v-8.9z"/>
                        </symbol>
                    </svg>

                    <svg class="extra">
                        <symbol id="shuffle" viewBox="0 0 512 512">
                            <path d="M504.971 359.029c9.373 9.373 9.373 24.569 0 33.941l-80 79.984c-15.01 15.01-40.971 4.49-40.971-16.971V416h-58.785a12.004 12.004 0 0 1-8.773-3.812l-70.556-75.596 53.333-57.143L352 336h32v-39.981c0-21.438 25.943-31.998 40.971-16.971l80 79.981zM12 176h84l52.781 56.551 53.333-57.143-70.556-75.596A11.999 11.999 0 0 0 122.785 96H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12zm372 0v39.984c0 21.46 25.961 31.98 40.971 16.971l80-79.984c9.373-9.373 9.373-24.569 0-33.941l-80-79.981C409.943 24.021 384 34.582 384 56.019V96h-58.785a12.004 12.004 0 0 0-8.773 3.812L96 336H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h110.785c3.326 0 6.503-1.381 8.773-3.812L352 176h32z"/>
                        </symbol>
                    </svg>
                </div>

                <div class="prev">
                    <svg viewBox="0 0 512 512">
                        <path d="M11.5 280.6l192 160c20.6 17.2 52.5 2.8 52.5-24.6V96c0-27.4-31.9-41.8-52.5-24.6l-192 160c-15.3 12.8-15.3 36.4 0 49.2zm256 0l192 160c20.6 17.2 52.5 2.8 52.5-24.6V96c0-27.4-31.9-41.8-52.5-24.6l-192 160c-15.3 12.8-15.3 36.4 0 49.2z"/>
                    </svg>
                </div>

                <div class="play_pause">
                    <svg><use href="#play" class="play"></use></svg>

                    <svg class="extra">
                        <symbol id="play" viewBox="0 0 512 512">
                            <path d="M371.7 238l-176-107c-15.8-8.8-35.7 2.5-35.7 21v208c0 18.4 19.8 29.8 35.7 21l176-101c16.4-9.1 16.4-32.8 0-42zM504 256C504 119 393 8 256 8S8 119 8 256s111 248 248 248 248-111 248-248zm-448 0c0-110.5 89.5-200 200-200s200 89.5 200 200-89.5 200-200 200S56 366.5 56 256z"/>
                        </symbol>
                    </svg>

                    <svg class="extra">
                        <symbol id="pause" viewBox="0 0 512 512">
                            <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm96-280v160c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16zm-112 0v160c0 8.8-7.2 16-16 16h-48c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h48c8.8 0 16 7.2 16 16z"/>
                        </symbol>
                    </svg>
                </div>

                <div class="next"> 
                    <svg viewBox="0 0 512 512">
                        <path d="M500.5 231.4l-192-160C287.9 54.3 256 68.6 256 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2zm-256 0l-192-160C31.9 54.3 0 68.6 0 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2z"/>
                    </svg>
                </div>

                <div class="list">
                    <svg><use href="#list"></use></svg>

                    <svg class="extra">
                        <symbol id="list" viewBox="0 0 512 512">
                            <path d="M16 256h256a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16zm0-128h256a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16H16A16 16 0 0 0 0 80v32a16 16 0 0 0 16 16zm128 192H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM470.94 1.33l-96.53 28.51A32 32 0 0 0 352 60.34V360a148.76 148.76 0 0 0-48-8c-61.86 0-112 35.82-112 80s50.14 80 112 80 112-35.82 112-80V148.15l73-21.39a32 32 0 0 0 23-30.71V32a32 32 0 0 0-41.06-30.67z"/>
                        </symbol>
                    </svg>
                </div>

                <audio class="audio" src=""></audio>
            </div>
            
        </div>

        <div class="list-bar">
            <div class="list-header">
                <div class="leftM">
                    <svg><use href="#list"></use></svg>
                    <span>Music List</span>
                </div>

                <div class="rightM">
                    <svg viewBox="0 0 352 512">
                        <path d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/>
                    </svg>
                </div>    
            </div>

            <div class="list-body"></div>
        </div>
    </div>

    <script src="Music Data.js"></script>
    
    <script>

        let image = document.querySelector('.img img');
        let title = document.querySelector('.txt h2');
        let artist = document.querySelector('.txt h3');
        let audio = document.querySelector('.audio');

        let play_pause = document.querySelector('.play_pause');
        let ppBtn = document.querySelector('.play_pause svg use')
        let prev = document.querySelector('.prev');
        let next = document.querySelector('.next');

        let progress = document.querySelector('.prog_bar');
        let prog_bar = document.querySelector('.prog_bar span');
        let currentT = document.querySelector('.timer .currentT');
        let duration = document.querySelector('.timer .duration');

        let suff_rept = document.querySelector('.suff_rept');
        let srBtn = document.querySelector('.suff_rept svg use');

        let list = document.querySelector('.list');
        let close = document.querySelector('.rightM');
        let list_bar = document.querySelector('.list-bar');
        let list_body = document.querySelector('.list-body');

        let num = 0;

        window.addEventListener('load', () => {
            fetchData(num)
            playingNow(num)
        })

        // fetched data shown
        function fetchData(num){
            title.innerText = data[num].title;
            artist.innerText = data[num].artist;
            image.src = data[num].image;
            audio.src = data[num].audio;
        }
            
        // play Pause function
        play_pause.addEventListener('click', () => {
            let btn = ppBtn.classList.contains('play');
            btn ? playMusic() : pauseMusic()
        });

        // Play Music
        function playMusic(){
            ppBtn.classList.remove('play');
            ppBtn.classList.add('pause');
            ppBtn.setAttribute('href', '#pause');
            audio.play();
        }

        // Pause Music
        function pauseMusic(){
            ppBtn.classList.remove('pause');
            ppBtn.classList.add('play');
            ppBtn.setAttribute('href', '#play');
            audio.pause();
        }

        // next function
        next.addEventListener('click', nextMusic)

        // nextMusic
        function nextMusic(){
            num++;
            num > (data.length - 1) ? num = 0 : num = num;
            fetchData(num);
            playMusic()
            playingNow(num)
        }

        // prev function
        prev.addEventListener('click', prevMusic)

        // prevMusic
        function prevMusic(){
            num--;
            num < 0 ? num = (data.length - 1) : num = num;
            fetchData(num)
            playMusic()
            playingNow(num)
        }

        // timer function
        audio.addEventListener('timeupdate', (e) => {
            let currentT = e.target.currentTime;
            let duration = e.target.duration;

            // update progress bar
            let prog_width = (currentT / duration) * 100;
            prog_bar.style.width = `${prog_width}%`;


            // update the timer
            let currentTM = document.querySelector('.timer .currentT')
            let durationM = document.querySelector('.timer .duration')

            //  update current time
            let curMin = Math.floor(currentT / 60);
            let curSec = Math.floor(currentT % 60);

            if(curMin < 10) {curMin = `0${curMin}`}
            if(curSec < 10) {curSec = `0${curSec}`}

            currentTM.innerText = `${curMin}:${curSec}`;

            // update duration
            audio.addEventListener('loadeddata', () => {
                let audioDuration = audio.duration;

                let durMin = Math.floor(audioDuration / 60);
                let durSec = Math.floor(audioDuration % 60);

                if(durMin < 10) {durMin = `0${durMin}`}
                if(durSec < 10) {durSec = `0${durSec}`}

                durationM.innerText = `${durMin}:${durSec}`;
            })
                
        })


        // prog bar touch function
        progress.addEventListener('click', (e) => {
            let progressWidth = progress.clientWidth;
            let clickOffsetX = e.offsetX;
            let songDuration = audio.duration;

            audio.currentTime = (clickOffsetX / progressWidth) * songDuration;
            playMusic();
        })


        // shuffle repeat function icon change
        suff_rept.addEventListener('click', () => {
            if (srBtn.classList.contains('shuffle') === true) {
                srBtn.classList.remove('shuffle');
                srBtn.classList.add('repeat');
                srBtn.setAttribute('href', '#repeat');
            } 
            else if (srBtn.classList.contains('repeat') === true){
                srBtn.classList.remove('repeat');
                srBtn.classList.add('reptOne');
                srBtn.setAttribute('href', '#reptOne');
            }
            else {
                srBtn.classList.remove('reptOne');
                srBtn.classList.add('shuffle');
                srBtn.setAttribute('href', '#shuffle');
            }
        });

        // shuffle repeat function working
        audio.addEventListener('ended', () => {
            if (srBtn.classList.contains('shuffle') === true) {
                ranNum = Math.floor(Math.random() * data.length);
                fetchData(ranNum)
                playMusic()
            } 
            else if (srBtn.classList.contains('repeat') === true){
                nextMusic()
            }
            else {
                audio.currentTime = 0
                fetchData(num)
                playMusic()
            }
        })


        // list body fetch
        list.addEventListener('click', () => list_bar.classList.add('active'))

        close.addEventListener('click', () => list_bar.classList.remove('active'))

        for (let i = 0; i < data.length; i++) {

            let html = `
                <div class="song" id="${i}" onclick="getNum(this)">
                    <div class="leftS">
                        <h3>${data[i].title}</h3>
                        <h4>${data[i].artist}</h4>
                    </div>
                    <div class="rightS">
                        <span id="song${i}">04:12</span>
                    </div>
                    <audio src="${data[i].audio}" class="song${i}"></audio>
                </div>
            ` 
            list_body.insertAdjacentHTML('beforeend', html);
            // list_body.appendChild(html)

            // song duration fetch
            let songD = document.querySelector(`#song${i}`);
            let songS = document.querySelector(`.song${i}`);

            songS.addEventListener('loadeddata', () => {
                let audioD = songS.duration;

                let durMin = Math.floor(audioD / 60);
                let durSec = Math.floor(audioD % 60);

                if(durMin < 10) {durMin = `0${durMin}`}
                if(durSec < 10) {durSec = `0${durSec}`}

                songD.innerText = `${durMin}:${durSec}`;
            })
            
        }


        function playingNow(para) {

            for (let q = 0; q < data.length; q++) {
                list_body.children[q].classList.remove('playing');   
            }

            list_body.children[para].classList.add('playing');

        }
            
        function getNum(elem) {
            fetchData(elem.id)
            playMusic()
            playingNow(elem.id)

            list_bar.classList.remove('active') 
        }

        
        
    </script>
</body>
</html>
